{# src/Lotofootv2/Bundle/Resources/views/Hello/index.html.twig #}
{% extends 'Lotofootv2Bundle::layout.html.twig' %}

{% block navibar %}
	{% include 'Lotofootv2Bundle::navibar.html.twig' %}
{% endblock %}

{% block menu %}
	{% include 'Lotofootv2Bundle::menu.html.twig' %}
{% endblock %}

{% block title_body %}
		<div class="title-body">
			<div class="ligne-body-left">&nbsp;</div>
			Vos Paris Coupe du monde	&nbsp;
			<img src="{{ asset('bundles/lotofootv2/img/rewards/r12.png') }}"/>
			<div class="ligne-body-right">&nbsp;</div>
		</div>
{% endblock %}
	
{% block body %}


    <strong>Attention : </strong> 
    <ul>
    	<li>Chaque match a une date limite et une heure limite qui lui est propre vous n'êtes pas obligé de parier sur tous les matchs proposés. Vous pouvez parier au fur et mesure que les matchs arrivent.</li>
    	<li>De même, tant que la date limite n'est pas atteinte, vous pouvez parier autant de fois que vous le souhaitez sur un match.</li>
    </ul><br/>
        {% if err is defined and err is not null %}
    <span style="color:rgb(64,200,83)">Votes enregistrés</span><br/>
    <span style="color:red">
        {% autoescape false %}
        {{err}}
        {% endautoescape %}
    </span>
    
    {% endif %}
    	<style type="text/css">	
		 .scoreok{
		 	background-color:rgb(64,200,83);
		 	color:white;
		 }
	</style>

    <table>
        <tr><td  style="border:none">
           
                
            <form action="{{ path('_cup_post') }}" method="post">

	            <table  class="calendar">
	            	<tr>
	        			<th colspan="7" style="border-bottom: 1px white solid">Votes en cours</th>
	      			</tr>
	                <tr>
	                    <th>#</th>
	                    <th>Match</th>
	                    <th>Date</th>
	                    <th>1</th>
	                    <th>N</th>
	                    <th>2</th>
	                    <th>Score parié</th>
	                </tr>
	                {% for match in opens %}
	                <tr class="vote-cup">
	                    <td>
	                        {{match.id}}
	                    </td>
	                    <td class="match">
	                        <div class="drapeau {{match.teamHome}}"></div><div class="match-cup">{{('nationalteams.'~match.teamHome) | trans}} (1)</div><br/>
                            <div class="drapeau {{match.teamVisitor}}"></div><div class="match-cup">{{('nationalteams.'~match.teamVisitor) | trans}} (2)</div>
                        </td>
                        <td>
                           {{match.deadline|date("d/m/Y H:i")}}
                        </td>
	                    <td style="width:10px; padding:2px"><input id="result_{{match.id}}_1" type="radio" name="result_{{match.id}}" value="1"
	                        {% if app.request.get('result_'~match.id) == '1' %}checked{% endif %}/> </td>
	                    {% if match.factor == 1 %}
	                    <td style="width:10px; padding:2px"><input id="result_{{match.id}}_N" type="radio" name="result_{{match.id}}" value="N"
	                        {% if app.request.get('result_'~match.id) == 'N' %}checked{% endif %}/> </td>
	                    {% else %}
	                    <td></td>
	                    {% endif %}
	                    <td style="width:10px; padding:2px"><input id="result_{{match.id}}_2" type="radio" name="result_{{match.id}}" value="2"
	                        {% if app.request.get('result_'~match.id) == '2' %}checked{% endif %}/> </td>
	                    <td>    
	                        <input id="score_{{match.id}}" type="text" autocomplete="off" name="score_{{match.id}}" value="{{ app.request.get('score_'~match.id) }}" size="3" maxlength="3" style="width:50px" placeholder="x-x"/>
	                    </td>
	                </tr>
	                {% endfor %}
	            </table>
	            
	            <div class="control-group">
	                <div class="controls">
	                     <input type="submit" class="btn-vote" value="Valider vos paris !"/>
	                </div>
	            </div>
	            <div style="clear:both"></div>
	        </form><br/>
        <a href="http://www.lequipe.fr/Football/Coupe-du-monde/Saison-2014/calendrier-resultats.html" target="_blank" alt ="Résultats Coupe du Monde 2014" ><img src="{{ asset('bundles/lotofootv2/img/logo-lequipe.png') }}"/></a>
        </td><td style="border:none">
         
        
         
         <table  class="calendar">
         			<tr>
	        			<th colspan="7" style="border-bottom: 1px white solid">Votes terminés</th>
	      			</tr>
                    <tr>
                        <th>#</th>
                        <th>Match</th>
                        <th>Coeff</th>
                        <th>1N2</th>
                        <th>Score parié</th>
                        <th>Score effectif</th>
                        <th>Points</th>
                    </tr>
                    {% for match in closed %}
                    <tr class="vote-cup">
                        <td>
                            {{match.id+1}}
                        </td>
                        <td style="text-align:center; width:170px;">
                            <div class="drapeau {{match.teamHome}}"></div><div class="match-cup">{{('nationalteams.'~match.teamHome) | trans}}</div><br/>
                            <div class="drapeau {{match.teamVisitor}}"></div><div class="match-cup">{{('nationalteams.'~match.teamVisitor) | trans}}</div>
                        </td>
                        <td>
                            <img style="padding-top:5px;" src="{{ asset('bundles/lotofootv2/img/coeff'~match.factor~'.png') }}"/>
                        </td>
                        <td class="{% if app.request.get('result_'~match.id) == match.result and match.result is not null %} scoreok {% endif %}">
                            {{app.request.get('result_'~match.id)}}
                        </td>
                        <td class="{% if app.request.get('score_'~match.id) == match.score and match.score is not null %} scoreok {% endif %}">
                            {{app.request.get('score_'~match.id)}}
                        </td>
                        <td>
                            {{match.score}}
                        </td>
                        <td>
                            {{app.request.get('points_'~match.id)}}
                        </td>
                    </tr>
                    {% endfor %}
                </table>
        
        </td></tr>
    </table>

{% endblock %}

{% block footer %}
	{% include 'Lotofootv2Bundle::footer.html.twig' %}
{% endblock %}
